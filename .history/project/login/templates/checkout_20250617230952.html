{% extends "main.html" %}
{% load static %}
{% block content %}
<div class="container" style="height:100vh;margin:70px 0;">
    <div class="row mt-4">
        <div class="col mt-2">
            <div class="d-flex ">
            <p><b>Cart Summary</b></p>
            <a class='px-4'href="{% url "cart" %}">Edit</a>
            <a href="{% url "thankyou" %}">Buynow</a>
            </div>  
            <table class="table">
                <tr class="table-dark">
                    <td><p>name</p></td>
                    <td><p>quantity</p></td>
                    <td><p>Total price</p></td>
                </tr>
            {% for product in cart_products  %}
                <tr>
                    <td><p>{{product.name}}</p></td>
                    <td><p>{{product.quantity}}</p></td>
                    <td><p>{{product.total_price}}</p></td>
                </tr> 
            {% endfor %}
            <tfoot class="table-info">
                <td><p>subtotal</p></td>
                <td><p>{{total_quantity}}</p></td>
                <td><p>{{product_total}}</p></td>
            </tfoot>
            </table>
        </div>
        <div class="col">
            <div class="container-fluid mt-5">         
                <table class="table table-responsive ">
                    <tr class="table-dark">
                        <td><p>Details</p></td> 
                        <td><p>Prices</p></td>                                                   
                    </tr>
                    {% for i in cart_products  %}
                        <tr>
                            <td><p>{{i.gst}}</p></td>                  
                            <td><p>{{i.total}}</p></td>
                        </tr> 
                    {% endfor %}
                        <tr>
                            <td><p>GST</p></td>
                            <td><p>{{gst_amt|floatformat:2}}</p></td>                
                        </tr>
                        <tr>
                            <td><p>Shipping_charges</p></td>
                            <td><p>{{shipping_charges}}</p></td>
                        </tr>
                        <tr>
                            <td><p>Total</p></td>               
                            <td><p>{{total_price|floatformat:2}}</p></td>
                        </tr> 
                </table>
            </div>
        </div>  
    </div>
    <div class="col mt-4">
            <h4>Delievery address</h4>
            <form action="{% url "user_details" %}" method="POST" class='form'>
                {% csrf_token %}
                <div class="form-sect">
                    <label for="h">
                        <input id="h" type="radio"  name="addresstype" value="home" onclick="showFields('home')" required> Home
                    </label>
                    <label for="o">
                        <input id="o" class="ml-3" type="radio" name="addresstype" value="office" onclick="showFields('office')" required> Office
                    </label>
                    <div>
                        <div class="mb-2" style="width:100%">
                            
                            <input  class="mb-2" type="text" placeholder="Fullname" name="fullname" required>
                            
                            <input type="tel" placeholder="Phone Number" name="contactnumber" required>
                        </div>
                        <div class="mb-2">
                            
                            <input type="pin" placeholder="Pincode" name="pincode" required>
                        </div>
                        <div class="mb-2">
                            
                            <input type="email" placeholder="Email" name="email" >
                        </div>
                        <div class="mb-2" style="width:100%">
                            
                            <textarea style="width:100%" name="address" placeholder="Address" required></textarea> 
                        </div>
                    </div>
                </div>
                <div class="mt-4">
                    <button type="submit">save and proceed</button>
                </div>

            </form>
    </div>
    <div class='row mt-5'>
        
<div class="payment-form">
  <h2>Select Payment Method</h2>
        <form action="/submit-payment/" method="POST">
            <!-- {% csrf_token %} if using Django -->

            <!-- Cash on Delivery -->
            <div class="payment-option">
                <input type="radio" id="cod" name="payment_method" value="cod" onclick="showDetails()" checked>
                <label for="cod">Cash on Delivery</label>
                <div class="payment-details" id="cod-details">
                    <p>No extra info needed for COD.</p>
                </div>
            </div>

            <!-- PayPal -->
            <div class="payment-option">
                <input type="radio" id="paypal" name="payment_method" value="paypal" onclick="showDetails()">
                <label for="paypal">PayPal</label>
                <div class="payment-details" id="paypal-details">
                    <label for="paypal_email">PayPal Email:</label><br>
                    <input type="email" id="paypal_email" name="paypal_email" placeholder="example@paypal.com" required>
                </div>
            </div>

            <!-- Card -->
            <div class="payment-option">
                <input type="radio" id="card" name="payment_method" value="card" onclick="showDetails()">
                <label for="card">Credit/Debit Card</label>
                <div class="payment-details" id="card-details">
                    <label for="card_number">Card Number:</label><br>
                    <input type="text" id="card_number" name="card_number" placeholder="1234 5678 9012 3456" required><br><br>

                    <label for="expiry">Expiry Date:</label><br>
                    <input type="text" id="expiry" name="expiry" placeholder="MM/YY" required><br><br>

                    <label for="cvv">CVV:</label><br>
                    <input type="text" id="cvv" name="cvv" placeholder="123" required>
                </div>
            </div>

            <!-- Razorpay -->
            <div class="payment-option">
                <input type="radio" id="razorpay" name="payment_method" value="razorpay" onclick="showDetails()">
                <label for="razorpay">Razorpay</label>
                <div class="payment-details" id="razorpay-details">
                    <label for="razorpay_id">Razorpay Transaction ID:</label><br>
                    <input type="text" id="razorpay_id" name="razorpay_id" placeholder="txn_ABC123XYZ">
                </div>
            </div>

            <br>
            <button type="submit" class="submit-btn">Continue to Payment</button>
        </form>
        </div>
    </div>
</div>
{% endblock content %}
<script src="{% static "js/script.js" %}"></script>